import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate a detailed travel plan for Las Vegas for 3 days for a Couple with a Cheap budget ($20 - $50 per day). Provide a list of hotels with details including the hotel name, address, price per night, image URL, geo coordinates (latitude, longitude), rating, and a brief description. Additionally, create a day-wise itinerary suggesting places to visit with details such as place name, description, image URL, geo coordinates, ticket pricing, rating, estimated travel time from the previous location, and the best time to visit. Format the response in JSON.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "tripName": "Las Vegas Budget Getaway for Two",\n  "duration": "3 Days",\n  "budget": "$20 - $50 per day (for two)",\n  "travelers": "Couple",\n  "currency": "USD",\n  "hotels": [\n    {\n      "hotelName": "Oasis at Gold Spike",\n      "address": "217 N Las Vegas Blvd, Las Vegas, NV 89101",\n      "pricePerNight": 30,\n      "imageURL": "https://example.com/goldspike_oasis.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1698,\n        "longitude": -115.1423\n      },\n      "rating": 3.5,\n      "description": "Basic but clean rooms in downtown Vegas, with access to Gold Spike\'s bar and social games. Good for a social atmosphere."\n    },\n     {\n      "hotelName": "Fremont Hotel & Casino",\n      "address": "200 Fremont St, Las Vegas, NV 89101",\n      "pricePerNight": 35,\n      "imageURL": "https://example.com/fremont_hotel.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1703,\n        "longitude": -115.1438\n      },\n      "rating": 4.0,\n      "description": "Located on Fremont Street Experience, offering affordable rooms and easy access to entertainment."\n    },\n    {\n      "hotelName": "Main Street Station Casino Brewery Hotel",\n      "address": "200 N Main St, Las Vegas, NV 89101",\n      "pricePerNight": 40,\n      "imageURL": "https://example.com/main_street_station.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1715,\n        "longitude": -115.1476\n      },\n      "rating": 4.2,\n      "description": "Offers unique Victorian-era decor, a brewery, and affordable rooms in downtown Las Vegas."\n    }\n  ],\n  "itinerary": [\n    {\n      "day": 1,\n      "theme": "Downtown Vegas Exploration",\n      "activities": [\n        {\n          "placeName": "Fremont Street Experience",\n          "description": "A pedestrian mall with a massive LED canopy showing light shows, live music, and street performers.",\n          "imageURL": "https://example.com/fremont_street.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1701,\n            "longitude": -115.1427\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "bestTimeToVisit": "Evening for light shows",\n          "estimatedTravelTimeFromPreviousLocation": "N/A"\n        },\n        {\n          "placeName": "SlotZilla Zip Line",\n          "description": "Offers two different zip line experiences above Fremont Street.",\n          "imageURL": "https://example.com/slotzilla.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1701,\n            "longitude": -115.1423\n          },\n          "ticketPricing": "$36-$56",\n          "rating": 4.0,\n          "bestTimeToVisit": "Anytime",\n          "estimatedTravelTimeFromPreviousLocation": "Walkable (Located on Fremont Street)"\n        },\n        {\n          "placeName": "Downtown Container Park",\n          "description": "An open-air shopping center built from shipping containers with unique shops, restaurants, and a playground.",\n          "imageURL": "https://example.com/container_park.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1694,\n            "longitude": -115.1393\n          },\n          "ticketPricing": "Free (Entry)",\n          "rating": 4.3,\n          "bestTimeToVisit": "Afternoon or Evening",\n          "estimatedTravelTimeFromPreviousLocation": "5 minute walk"\n        },\n        {\n          "placeName": "Free Walking Tour of Downtown",\n          "description": "Several companies offer free (tip-based) walking tours highlighting the history and attractions of Downtown Las Vegas.",\n          "imageURL": "https://example.com/downtown_tour.jpg",\n          "geoCoordinates": {\n            "latitude": 36.170,\n            "longitude": -115.140\n          },\n          "ticketPricing": "Free (Tip-based)",\n          "rating": 4.0,\n          "bestTimeToVisit": "Morning or Afternoon (Check tour schedules)",\n          "estimatedTravelTimeFromPreviousLocation": "N/A"\n        }\n      ]\n    },\n    {\n      "day": 2,\n      "theme": "The Strip on a Shoestring",\n      "activities": [\n        {\n          "placeName": "Welcome to Fabulous Las Vegas Sign",\n          "description": "Iconic landmark for a photo opportunity.",\n          "imageURL": "https://example.com/las_vegas_sign.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0853,\n            "longitude": -115.1724\n          },\n          "ticketPricing": "Free",\n          "rating": 4.6,\n          "bestTimeToVisit": "Early morning or late evening to avoid crowds",\n          "estimatedTravelTimeFromPreviousLocation": "From Downtown: 15-20 minute ride share"\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "description": "Stunning seasonal floral displays inside the Bellagio hotel.",\n          "imageURL": "https://example.com/bellagio_gardens.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1125,\n            "longitude": -115.1741\n          },\n          "ticketPricing": "Free",\n          "rating": 4.7,\n          "bestTimeToVisit": "Anytime during opening hours",\n          "estimatedTravelTimeFromPreviousLocation": "Ride share or bus from Welcome Sign (~15-20 mins)"\n        },\n        {\n          "placeName": "Bellagio Fountains",\n          "description": "Spectacular water show set to music in front of the Bellagio.",\n          "imageURL": "https://example.com/bellagio_fountains.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1128,\n            "longitude": -115.1742\n          },\n          "ticketPricing": "Free",\n          "rating": 4.8,\n          "bestTimeToVisit": "Evening for the full experience",\n          "estimatedTravelTimeFromPreviousLocation": "Walkable (Located in front of Bellagio)"\n        },\n        {\n          "placeName": "Free Circus Acts at Circus Circus",\n          "description": "Daily circus acts inside the Circus Circus hotel.",\n          "imageURL": "https://example.com/circus_circus.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1283,\n            "longitude": -115.1642\n          },\n          "ticketPricing": "Free",\n          "rating": 3.8,\n          "bestTimeToVisit": "Check show schedule",\n          "estimatedTravelTimeFromPreviousLocation": "Ride Share or bus from Bellagio area (~15 minutes)"\n        }\n      ]\n    },\n    {\n      "day": 3,\n      "theme": "Nature and Value",\n      "activities": [\n        {\n          "placeName": "Red Rock Canyon National Conservation Area",\n          "description": "Scenic desert landscape with hiking trails and beautiful views.",\n          "imageURL": "https://example.com/red_rock_canyon.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1497,\n            "longitude": -115.4158\n          },\n          "ticketPricing": "$15 per vehicle",\n          "rating": 4.7,\n          "bestTimeToVisit": "Morning or late afternoon to avoid the heat",\n          "estimatedTravelTimeFromPreviousLocation": "From the Strip: ~30-40 minute ride share or bus transfer followed by a ride share."\n        },\n        {\n          "placeName": "Seven Magic Mountains",\n          "description": "Colorful art installation south of Las Vegas.",\n          "imageURL": "https://example.com/seven_magic_mountains.jpg",\n          "geoCoordinates": {\n            "latitude": 35.9587,\n            "longitude": -115.1693\n          },\n          "ticketPricing": "Free",\n          "rating": 4.4,\n          "bestTimeToVisit": "Anytime",\n          "estimatedTravelTimeFromPreviousLocation": "From Red Rock Canyon: ~ 45-60 minute drive or ride share.  Consider visiting directly from Las Vegas before Red Rock to reduce travel time."\n        },\n        {\n          "placeName": "The Linq Promenade (Observation Wheel)",\n          "description": "Outdoor promenade with shops, restaurants, and the High Roller observation wheel. (Only walk the promenade, the observation wheel is typically outside the budget).",\n          "imageURL": "https://example.com/linq_promenade.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1163,\n            "longitude": -115.1702\n          },\n          "ticketPricing": "Free (Promenade only)",\n          "rating": 4.2,\n          "bestTimeToVisit": "Evening for the atmosphere",\n          "estimatedTravelTimeFromPreviousLocation": "From Seven Magic Mountains: Ride Share back to the strip (~20-30 minutes)."\n        }\n      ]\n    }\n  ],\n  "notes": "This itinerary focuses on free or low-cost attractions. Transportation costs can be minimized by utilizing public transportation (buses) or ride-sharing services strategically.  Food costs can be managed by eating at affordable restaurants, utilizing grocery stores for some meals, or taking advantage of happy hour deals. Prioritize experiences that align with your interests within the given budget."\n}\n```',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());